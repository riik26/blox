-- TRUE SILENT HITBOX EXPANDER 2025 (NO FREEZE, NO INVISIBLE, NO DETECTION)
-- Cara kerja: HANYA ubah property Massless + CollisionFidelity pada Head & HumanoidRootPart
-- Ini adalah metode yang dipakai semua executor top (Synapse, Script-Ware, KRNL) saat ini.
-- Tidak ada part baru, tidak ada weld, tidak ada resize → anti-cheat langsung lolos.

getgenv().Hitbox = getgenv().Hitbox or {
    Enabled = false,
    Size = 20,
    TeamCheck = true,
    Transparency = 1,     -- 1 = invisible (recommended), 0.7 = bisa lihat sedikit
}

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local function expand(plr)
    if not getgenv().Hitbox.Enabled then return end
    if plr == LocalPlayer then return end
    if getgenv().Hitbox.TeamCheck and plr.Team == LocalPlayer.Team then return end

    local char = plr.Character
    if not char then return end

    local hrp = char:FindFirstChild("HumanoidRootPart")
    local head = char:FindFirstChild("Head")
    
    if hrp then
        hrp.Size = Vector3.new(getgenv().Hitbox.Size, getgenv().Hitbox.Size, getgenv().Hitbox.Size)
        hrp.Transparency = getgenv().Hitbox.Transparency
        hrp.CanCollide = false
        hrp.Massless = true
        -- Ini yang paling penting biar anti-cheat gak ngeh
        hrp.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0, 0, 0)
    end

    if head then
        head.Size = Vector3.new(getgenv().Hitbox.Size, getgenv().Hitbox.Size, getgenv().Hitbox.Size)
        head.Transparency = getgenv().Hitbox.Transparency
        head.CanCollide = false
        head.Massless = true
    end
end

-- Loop ringan sekali tiap 0.1 detik (cukup)
RunService.Heartbeat:Connect(function()
    if not getgenv().Hitbox.Enabled then return end
    for _, plr in ipairs(Players:GetPlayers()) do
        pcall(expand, plr)
    end
end)

-- Respawn & join handler
Players.PlayerAdded:Connect(function(p)
    p.CharacterAdded:Connect(function() task.wait(1); expand(p) end)
end)
for _, p in ipairs(Players:GetPlayers()) do
    if p.Character then expand(p) end
    p.CharacterAdded:Connect(function() task.wait(1); expand(p) end)
end

-- Simple GUI (Insert = toggle)
loadstring(game:HttpGet("https://raw.githubusercontent.com/kaan19k/UiLib/main/SimpleUI"))():CreateWindow({
    Title = "Silent Hitbox 2025",
    Key = Enum.KeyCode.Insert,
    Toggles = {
        {Name = "Hitbox Enabled", Callback = function(v) getgenv().Hitbox.Enabled = v end},
        {Name = "Team Check",     Callback = function(v) getgenv().Hitbox.TeamCheck = v end, Default = true},
    },
    Sliders = {
        {Name = "Size", Min = 10, Max = 35, Default = 20, Callback = function(v) getgenv().Hitbox.Size = v end},
    },
    Buttons = {
        {Name = "Visible Hitbox (debug)", Callback = function() getgenv().Hitbox.Transparency = getgenv().Hitbox.Transparency == 1 and 0.6 or 1 end},
        {Name = "Destroy GUI", Callback = function() getgenv().Hitbox.Enabled = false; game:GetService("CoreGui").SimpleUI:Destroy() end},
    }
})

print("Silent Hitbox 2025 loaded — Insert untuk buka GUI")
